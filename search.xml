<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ã€ŠArrayListçš„åº•å±‚åŸç†ã€‹</title>
      <link href="/2025/06/03/2025060319/"/>
      <url>/2025/06/03/2025060319/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹">ç®€ä»‹</h2><p><code>ArrayList</code> æ˜¯ Java é›†åˆæ¡†æ¶ä¸­æœ€å¸¸ç”¨çš„åŠ¨æ€æ•°ç»„å®ç°ç±»ã€‚å®ƒå®ç°äº† <code>List</code> æ¥å£ï¼Œå…è®¸å­˜å‚¨ <strong>æœ‰åºã€å¯é‡å¤</strong> çš„å…ƒç´ ã€‚æ”¯æŒéšæœºè®¿é—®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º <code>O(1)</code>ã€‚æ’å…¥å’Œåˆ é™¤éå°¾éƒ¨å…ƒç´ æ—¶ï¼Œéœ€è¦ç§»åŠ¨å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code>ã€‚</p><h2 id="åº•å±‚ç»“æ„">åº•å±‚ç»“æ„</h2><p>æ ¸å¿ƒæˆå‘˜å˜é‡ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">transient</span> Object[] elementData; <span class="comment">// å­˜å‚¨å…ƒç´ çš„æ•°ç»„ï¼Œtransientè¡¨ç¤ºä¸å‚ä¸åºåˆ—åŒ–</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> size;               <span class="comment">// å½“å‰åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°</span></span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€æ‰©å®¹æœºåˆ¶">åŠ¨æ€æ‰©å®¹æœºåˆ¶</h2><p>åœ¨ <code>ArrayList</code> ä¸­ï¼Œæ‰©å®¹æ˜¯æ€§èƒ½å…³é”®ç‚¹ä¹‹ä¸€ã€‚æ¯æ¬¡æ·»åŠ æ–°å…ƒç´ æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ <code>ensureCapacityInternal</code> æ–¹æ³•ç¡®ä¿å®¹é‡è¶³å¤Ÿã€‚å¦‚æœä¸å¤Ÿï¼Œå°±è§¦å‘ <code>grow</code> æ–¹æ³•è¿›è¡Œæ‰©å®¹ã€‚</p><h3 id="ensureCapacityInternal-æ–¹æ³•"><code>ensureCapacityInternal</code> æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityInternal</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå½“å‰æ•°ç»„å…ƒç´ ä¸ºç©ºæ•°ç»„ï¼ˆåˆå§‹æƒ…å†µï¼‰ï¼Œè¿”å›é»˜è®¤å®¹é‡å’Œæœ€å°å®¹é‡ä¸­çš„è¾ƒå¤§å€¼ä½œä¸ºæ‰€éœ€å®¹é‡</span></span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// å¦åˆ™ç›´æ¥è¿”å›æœ€å°å®¹é‡</span></span><br><span class="line">    ensureExplicitCapacity(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureExplicitCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    modCount++; <span class="comment">// ç”¨äºè®°å½•ç»“æ„æ€§ä¿®æ”¹çš„æ¬¡æ•°ï¼ˆç”¨äºå¿«é€Ÿå¤±è´¥ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæœ€å°æ‰€éœ€å®¹é‡å¤§äºå½“å‰æ•°ç»„é•¿åº¦ï¼Œå°±è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>modCount++</code> æ˜¯ArrayListä¸­å¿«é€Ÿå¤±è´¥ï¼ˆfail-fastï¼‰æœºåˆ¶çš„ä¸€éƒ¨åˆ†</p><h3 id="grow-æ–¹æ³•ï¼ˆæ‰©å®¹æ ¸å¿ƒï¼‰"><code>grow</code> æ–¹æ³•ï¼ˆæ‰©å®¹æ ¸å¿ƒï¼‰</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="comment">// åŸå§‹å®¹é‡</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ–°å®¹é‡ = åŸå®¹é‡ + åŸå®¹é‡/2ï¼ˆå³1.5å€ï¼‰</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœè®¡ç®—çš„æ–°å®¹é‡è¿˜æ˜¯ä¸å¤Ÿç”¨ï¼Œå°±ç›´æ¥ç”¨minCapacity</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœæ–°å®¹é‡è¶…è¿‡æœ€å¤§æ•°ç»„å®¹é‡é™åˆ¶ï¼Œåˆ™è¿›è¡Œæé™å¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä½¿ç”¨ Arrays.copyOf å¤åˆ¶æ—§æ•°ç»„å†…å®¹åˆ°æ–°æ•°ç»„</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æ•°ç»„å…è®¸çš„æœ€å¤§å®¹é‡ï¼ˆç•¥å°äº Integer æœ€å¤§å€¼ï¼Œé¢„ç•™å¤´éƒ¨å¼€é”€ç©ºé—´ï¼‰</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_ARRAY_SIZE</span> <span class="operator">=</span> Integer.MAX_VALUE - <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¡ç®—åœ¨æç«¯æƒ…å†µä¸‹çš„è¶…å¤§å®¹é‡ï¼ˆå¦‚æ‰©å®¹æ‰€éœ€å®¹é‡éå¸¸å¤§æ—¶çš„å…œåº•æ–¹æ¡ˆï¼‰</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> minCapacity ç”¨æˆ·è¯·æ±‚çš„æœ€å°å®¹é‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è¿”å›ä¸€ä¸ªåˆç†çš„æœ€å¤§å®¹é‡å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hugeCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæœ€å°å®¹é‡ä¸ºè´Ÿï¼Œè¯´æ˜å·²ç»æ•´å‹æº¢å‡ºï¼ŒæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">OutOfMemoryError</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœç”¨æˆ·è¯·æ±‚çš„å®¹é‡å¤§äºå…è®¸çš„æœ€å¤§æ•°ç»„å¤§å°ï¼Œåˆ™è¿”å› Integer.MAX_VALUEï¼ˆ2147483647ï¼‰ï¼Œå¦åˆ™è¿”å› MAX_ARRAY_SIZEï¼ˆ2147483639ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ ¸å¿ƒæ–¹æ³•æºç ">æ ¸å¿ƒæ–¹æ³•æºç </h2><h3 id="add-æ–¹æ³•"><code>add</code> æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// ç¡®ä¿å®¹é‡å¤Ÿç”¨</span></span><br><span class="line">    elementData[size++] = e;            <span class="comment">// æ”¾å…¥å…ƒç´ å¹¶æ›´æ–°size</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="get-æ–¹æ³•"><code>get</code> æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="comment">// æ£€æŸ¥ç´¢å¼•æ˜¯å¦åœ¨æœ‰æ•ˆèŒƒå›´å†… [0, size)</span></span><br><span class="line">    rangeCheck(index);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»å†…éƒ¨æ•°ç»„ä¸­è·å–å…ƒç´ å¹¶è¿”å›ï¼ˆéœ€è¦ç±»å‹è½¬æ¢ä¸ºæ³›å‹ Eï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">rangeCheck</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœç´¢å¼•å¤§äºç­‰äºå½“å‰å…ƒç´ ä¸ªæ•°ï¼Œè¯´æ˜è¶Šç•Œ</span></span><br><span class="line">    <span class="keyword">if</span> (index &gt;= size)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IndexOutOfBoundsException</span>(outOfBoundsMsg(index));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="remove-æ–¹æ³•"><code>remove</code> æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="comment">// æ£€æŸ¥ç´¢å¼•æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line">    rangeCheck(index);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿å­˜è¦åˆ é™¤çš„å…ƒç´ ï¼Œç¨åè¿”å›</span></span><br><span class="line">    <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> (E) elementData[index];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—éœ€è¦ç§»åŠ¨çš„å…ƒç´ ä¸ªæ•°ï¼ˆä» index+1 åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼‰</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœ index åé¢è¿˜æœ‰å…ƒç´ ï¼Œå°±å°†åé¢çš„å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½</span></span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.arraycopy(elementData, index + <span class="number">1</span>, elementData, index, numMoved);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æœ€åä¸€ä¸ªå…ƒç´ ç½®ä¸º nullï¼Œé‡Šæ”¾å¯¹è±¡å¼•ç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼</span></span><br><span class="line">    elementData[--size] = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›è¢«åˆ é™¤çš„å…ƒç´ </span></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><h3 id="å­˜å‚¨ç»“æ„">å­˜å‚¨ç»“æ„</h3><p><code>ArrayList</code> çš„åº•å±‚æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…·ä½“æ˜¯ä¸€ä¸ª <code>Object[] elementData</code> ç±»å‹çš„å¯¹è±¡æ•°ç»„ã€‚æ‰€æœ‰å…ƒç´ éƒ½è¢«é¡ºåºå­˜å‚¨ï¼Œå› æ­¤æ”¯æŒé€šè¿‡ä¸‹è¡¨å¿«é€Ÿéšæœºè®¿é—®ï¼Œæ€§èƒ½éå¸¸é«˜æ•ˆã€‚</p><h3 id="åˆå§‹å®¹é‡">åˆå§‹å®¹é‡</h3><p>å½“æˆ‘ä»¬ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•åˆ›å»º <code>ArrayList</code> å®ä¾‹æ—¶ï¼Œå¹¶ä¸ä¼šç«‹å³ åˆ†é…æ•°ç»„ç©ºé—´ï¼Œè€Œæ˜¯é‡‡ç”¨æ‡’åŠ è½½æœºåˆ¶ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ æ—¶åˆå§‹åŒ–å®¹é‡ä¸º 10 ã€‚</p><h3 id="æ‰©å®¹ç­–ç•¥">æ‰©å®¹ç­–ç•¥</h3><p>å½“ <code>ArrayList</code> æ‰€ä½¿ç”¨çš„æ•°ç»„ç©ºé—´ä¸è¶³ä»¥å®¹çº³æ–°å…ƒç´ æ—¶ä¼šè‡ªåŠ¨æ‰©å®¹ã€‚å®¹é‡æ‰©å±•ä¸ºåŸæ¥çš„ 1.5 å€ï¼Œå³æ—§å®¹é‡åŠ ä¸Šæ—§å®¹é‡çš„ä¸€åŠã€‚</p><h3 id="çº¿ç¨‹å®‰å…¨æ€§">çº¿ç¨‹å®‰å…¨æ€§</h3><p><code>ArrayList</code> æ˜¯éçº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ã€‚å¦‚æœåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œéœ€è¦æ‰‹åŠ¨é€šè¿‡ <code>Collections.synchronizedList</code> æˆ–ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»ï¼ˆå¦‚ <code>CopyOnWriteArrayList</code>ï¼‰æ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaåŸºç¡€ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šç´ ç¬ºåˆå±•æ—¶ã€‹</title>
      <link href="/2025/06/03/start/"/>
      <url>/2025/06/03/start/</url>
      
        <content type="html"><![CDATA[<h2 id="å¯ç¨‹æ—¶åˆ»-âœ¨">å¯ç¨‹æ—¶åˆ» âœ¨</h2><p><strong>2025 å¹´ 6 æœˆ 3 æ—¥</strong>ï¼Œåšå®¢çš„ç¬¬ä¸€é¡µåœ¨æ­¤å±•å¼€ã€‚</p><blockquote><p>åƒç¿»å¼€ä¸€æœ¬æ–°æ—¥è®°çš„æ‰‰é¡µï¼Œ<br>å¹²å‡€è€Œå®‰é™ã€‚<br>é”®ç›˜å°šæœªæ¸©çƒ­ï¼Œé¡µé¢ç´ å‡€å¦‚é›ªï¼Œ<br>å®›å¦‚æ–°é“ºçš„å°å¾„ï¼Œ<br>ç­‰å¾…è¶³è¿¹çš„è½ä¸‹ï¼Œæ€ç»ªçš„ç»µå»¶ã€‚</p></blockquote><h3 id="é¿é£è§’è½-ğŸ®">é¿é£è§’è½ ğŸ®</h3><p>è¿™é‡Œä¸æ˜¯å–§åš£ä¹‹åœ°ï¼Œ<br>è€Œæ˜¯ï¼š</p><ul><li>è®°å½•æƒ³æ³•çš„ ğŸ“– è®°äº‹æœ¬</li><li>åˆ†äº«çµæ„Ÿçš„ ğŸ’¡ å‚¨è—é—´</li><li>å¶å°”ç¢è¯­çš„ ğŸŒ™ å¤œå…‰ç¯</li></ul><h3 id="æ…¢å†™å®£è¨€-ğŸ–‹ï¸">æ…¢å†™å®£è¨€ ğŸ–‹ï¸</h3><p>åœ¨è¿™ä¸ªå¿«è½¬çš„ä¸–ç•Œé‡Œï¼Œ<br>æˆ‘ä»¬é€‰æ‹©ï¼š</p><ol><li><strong>ç»™æ–‡å­—ä»¥å‘¼å¸çš„ç©ºé—´</strong></li><li><strong>ä¸ºå¿ƒæƒ…ä¿ç•™å›æœ›çš„çª—å£</strong></li><li><strong>æ›¿æœªæ¥çš„è‡ªå·±ç‚¹äº®ä¸€ç›ç¯</strong></li></ol><blockquote><p>â€œè‹¥æ— ä¸€ä¸é”™è½ï¼Œ<br>äººç”Ÿæ€ä¼šå¦‚è¯—ï¼Ÿâ€</p></blockquote><hr><p>ğŸŒ± <strong>ä»ä»Šæ—¥èµ·</strong>ï¼Œä¸åšå®¢å…±ç”Ÿé•¿ã€‚<br>ğŸ«‚ <strong>æ¬¢è¿ä½ </strong>ï¼Œæ„¿å¸¸å¸¸ç›¸é€¢ã€‚</p><p>â€”â€” è®°äºèµ·ç‚¹</p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´»éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†™ä½œ </tag>
            
            <tag> å¿ƒæƒ… </tag>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
